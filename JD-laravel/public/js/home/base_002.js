function getCartNum(){$.ajax({url:"//red.jd.com/cart/fetchCartSgNum.html",dataType:"jsonp",success:function(a){var b=$(".cart_num .num"),c=window.parseInt(a.num);b.html(c?a.num:0)}})}function handleNav(){$(window).scroll(function(){var a=$(document).scrollTop(),b=$(".c-nav").offset().top+$(".c-nav").height(),c=$(".nav_float");c&&a>b?c.css("top","0"):c.css("top",-1*c.height())})}function handleShortcut(){$("#app-jd").bind("mouseover",function(a){a.preventDefault();var b=a.fromElement||a.relatedTarget,c=this;isin(c,b)||($(c).addClass("hover"),$(c).find(".hover_bg").removeClass("hide"))}),$("#app-jd").bind("mouseout",function(a){a.preventDefault();var b=this,c=a.toElement||a.relatedTarget;isin(b,c)||($(b).removeClass("hover"),$(b).find(".hover_bg").addClass("hide"))})}function isin(a,b){for(var c=b,d=!1;c!=document;){if(c==a){d=!0;break}if(!c)break;c=c.parentNode}return d}$(function(a){function b(){var a=document.createElement("input");return"placeholder"in a}function c(b){var c=(a(b).index(),f[a(b).index()]);a(b).css("color",c)}if(!b()){for(var d=a(":text"),e=d.length,f=[],g=0;e>g;g++){var h=d[g],i=a(h).attr("placeholder");""==a(h).val()&&null!=i&&(a(h).val(i),f[g]=a(h).css("color"),a(h).css("color","#666"))}d.focus(function(){null!=a(this).attr("placeholder")&&a(this).val()==a(this).attr("placeholder")&&(a(this).val(""),c(this))}).blur(function(){null==a(this).attr("placeholder")||""!=a(this).val()&&a(this).val()!=a(this).attr("placeholder")||(a(this).val(a(this).attr("placeholder")),a(this).css("color","#666"))})}}),function(a){a.fn.slideBox=function(b){var c={backgroundImg:!1,direction:"left",duration:.6,easing:"swing",delay:3,startIndex:0,hideClickBar:!0,clickBarRadius:5,hideBottomBar:!1,width:820,height:360},d=a.extend(c,b||{}),e=a(this),f=function(){var b=d.data;if(d.backgroundImg)var c=a('<div class="background" id="slideOneBg"></div>');var f=a('<ul class="items"></ul>');a(b).each(function(a,b){var e=b.imgUrl||"",g=b.bgImgUrl||"",h=b.textUrl||"",i=b.clstag||"",j='<li><a href="'+h+'" clstag="'+i+'" target="_blank"><img src="'+e+'"></a></li>',k=null;k=0==a?'<img src="'+g+'" class="curr" />':'<img src="'+g+'" />',f.append(j),d.backgroundImg&&c.append(k)}),e.append(f),d.backgroundImg&&e.before(c)};f();var g=e.children("ul.items"),h=g.find("li"),i=h.first().find("img"),j=h.size(),k=0,l=0,m="ASC",n=function(){if(!e.size())return!1;if(k=d.height?d.height:h.first().height(),l=d.width?d.width:h.first().width(),e.css({width:l+"px",height:k+"px"}),h.css({width:l+"px",height:k+"px"}),"left"==d.direction?g.css("width",j*l+"px"):g.css("height",j*k+"px"),g.find("li").eq(d.startIndex).addClass("active"),!d.hideBottomBar&&1!=h.length){var b=a('<div class="tips"></div>').appendTo(e),c=a('<div class="nums num-hover"></div>').hide().appendTo(b);h.each(function(b,e){var f=(a(e).find("a"),"");b==d.startIndex&&(f="active"),a("<a><em></em><i></i></a>").addClass(f).css("borderRadius",d.clickBarRadius+"px").mouseover(function(){a(this).addClass("active").siblings().removeClass("active"),g.find("li:eq("+a(this).index()+")").addClass("active").siblings().removeClass("active"),o(),p()}).appendTo(c)}),d.hideClickBar?(b.hover(function(){c.animate({top:"0px"},"fast")},function(){c.animate({top:b.height()+"px"},"fast")}),c.show().delay(2e3).animate({top:b.height()+"px"},"fast")):c.show()}h.size()>=1&&o()},o=function(){var b=g.find("li.active"),c=b.find("a"),f=b.index();if("left"==d.direction?(offset=f*l*-1,param={left:offset+"px"}):"top"==d.direction?(offset=f*k*-1,param={top:offset+"px"}):"fadein"==d.direction&&(param={},g.find("li").each(function(b,c){b!=f&&a(c).fadeOut(300)}),g.find("li").each(function(b,c){b==f&&a(c).fadeIn(300)})),e.find(".nums").find("a:eq("+f+")").addClass("active").siblings().removeClass("active"),e.find(".title").find("a").attr("href",c.attr("href")).text(c.attr("title")),d.backgroundImg){var h=e.attr("id"),i=h+"Bg";a("#"+i).find("img").each(function(b,c){b===f?(a(c).addClass("curr"),a(c).fadeIn(300)):(a(c).removeClass("curr"),a(c).fadeOut(300))})}g.stop().animate(param,1e3*d.duration,d.easing,function(){b.removeClass("active"),"ASC"==m?b.next().size()?b.next().addClass("active"):b.parent().children().eq(0).addClass("active"):"DESC"==m&&(b.prev().size()?b.prev().addClass("active"):(m="ASC",b.next().addClass("active")))}),e.data("timeid",window.setTimeout(o,1e3*d.delay))},p=function(){window.clearTimeout(e.data("timeid"))};e.hover(function(){p()},function(){e.data("timeid",window.setTimeout(o,1e3*d.delay))});var q=new Image;q.onload=null,n(),q.src=i.attr("src")}}(jQuery),$(function(){handleNav(),handleShortcut(),getCartNum()});