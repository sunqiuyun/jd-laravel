/* vip-2014 index2015.widget-2.js Date:2016-01-05 18:52:30 */
seajs.use([],function(){$(function(){var a=$("#top-ad"),b=a.find(".close"),c=257;$(window).bind("load",function(){a.animate({height:c},800),setTimeout(function(){b.click()},5e3)}),b.bind("click",function(){a.animate({height:0},800,function(){a.remove()})})})}),seajs.use(["jdf/1.0.0/unit/shortcut/2.0.0/shortcut.js"],function(a){a(),$(function(){var a=$("#vip-header");var b=a.find(".nav-items");a.find(".dpp-list").each(function(){$(this).css("width",$(this).parent().width()-2)}),pageConfig.navItem&&b.each(function(a){var c=b.eq(a);c.hasClass("nav-"+pageConfig.navItem)&&c.addClass("current")}),b.bind("mouseenter",function(){$(this).addClass("hover")}).bind("mouseleave",function(){$(this).removeClass("hover")})})}),seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable","jdf/1.0.0/ui/tips/1.0.0/tips","jdf/1.0.0/ui/dialog/1.0.0/dialog","vip/2014/js/vip.user.js"],function(){$(function(){var a=$(".u-growth .percent");a.css("width",a.attr("data"));var b=$(".slider");b.switchable({type:"focus",navItem:"ui-switchable-item",navSelectedClass:"current",contentClass:"slider-imgs",prevClass:"pre",nextClass:"next",mainClass:"img",hasPage:!0,autoPlay:!0,callback:function(a){$("#top-bg>div").eq(a).show().siblings().hide()}}),b.bind("mouseenter",function(){$(this).addClass("hover")}).bind("mouseleave",function(){$(this).removeClass("hover")}),$(".u-slider").switchable({type:"slider",mainClass:"u-slider-item",contentClass:"u-slider-wrap",prevClass:"prev",nextClass:"next",speed:600,hasPage:!0}),$(".signup-left h3 i").tips({align:["top","center"],width:200,hasClose:!1,hasCssLink:!1,callback:function(a,b){b.find(".ui-tips-arrow").css("margin-left",-18)}}),$("#ljbean").bind("click",function(){return jdUser.login(function(){isPuzzlesPlaying&&!isPuzzlesPlaying()&&$("body").dialog({hasCssLink:!1,title:"\u8ba4\u8bc1\u63d0\u793a",width:344,source:'<p class="ft16">\u63d0\u793a\uff1a\u8ba4\u8bc1\u540e\uff0c\u53ef\u4ee5\u6bcf\u5929\u7b7e\u5230\u9886\u53d6\u4eac\u8c46\u3002\u8fde\u7eed\u4e09\u5929\u7b7e\u5230\u8fd8\u80fd\u83b7\u5f97\u793c\u5305\uff0c\u5feb\u53bb\u8ba4\u8bc1\u5427\uff01</p><div class="text-center mt20"><a href="https://authpay.jd.com/auth/toAuthPage.action" class="ui-dialog-btn-submit btn-go-verify" target="_blank">\u9a6c\u4e0a\u8ba4\u8bc1</a><a href="#anchor" onclick="$.closeDialog();$(\'.g_puzzle_offside\').trigger(\'click\');return false;" class="ui-dialog-btn-submit btn-open-puzzle">\u7ee7\u7eed\u62fc\u56fe</a></div>',onReady:function(){$(".btn-go-verify").click(function(){var a=$(this);return a.hasClass("goVerify")?(location.reload(),!1):(a.addClass("goVerify"),void a.text("\u5b8c\u6210\u8ba4\u8bc1"))})},onCancel:function(){$(".btn-go-verify").hasClass("goVerify")&&location.reload()}})},!0),!1}),$(".signup-btn").bind("click",function(){var a=$(this);jdUser.login(function(){return a.hasClass("doing")?!1:(a.addClass("doing"),void $.ajax({type:"GET",url:"//vip.jd.com/index.php?mod=Vip.Ajax&action=signIn",dataType:"jsonp",success:function(b){a.removeClass("doing"),$("body").dialog(1==b.success?{hasCssLink:!1,title:"\u7b7e\u5230\u6210\u529f",width:344,source:'<p class="text-center ft16">\u606d\u559c\u60a8\u83b7\u5f97'+(b.result.continueReward?"\u8fde\u7eed\u7b7e\u5230\u793c\u5305"+(b.result.jdnum+b.result.extjdnum):b.result.jdnum)+'\u4e2a\u4eac\u8c46!</p><div class="ui-dialog-btn mt20"><a href="//vip.jd.com/bean.html" class="ui-dialog-btn-submit">\u4eac\u8c46\u5151\u6362</a><a href="//vip.jd.com/purchase.html" class="ui-dialog-btn-submit">\u4eac\u8c46\u4f18\u60e0\u8d2d</a></div>',hasButton:!1,onCancel:function(){location.reload()}}:{hasCssLink:!1,title:"\u7b7e\u5230\u5931\u8d25",width:344,source:'<p class="text-center ft16">\u8bf7\u91cd\u65b0\u7b7e\u5230\uff01</p>',hasButton:!1})}}))},!0)})})}),function(a){a.countup=function(b){var c=a.extend({ele:null,onchange:function(){},isTwoDigits:!0,isStart:!0,startBtn:null,stopBtn:null,resetBtn:null},b);var d=[];return a(c.ele).each(function(){var b=2e4;var e=null;var f=this;var g={};var h={};var i=new Date;var j=new Date(i.getTime()+b);var k=function(){i=new Date;var a=j.getTime()-i.getTime();nms=a/1e3,s=nms.toString().split(".")[0],b=1*nms.toString().split(".")[1],void 0==nms.toString().split(".")[1]&&(b="000"),h.s=s,h.ms=b,h.nms=nms,c.isTwoDigits&&(10>s&&s>0&&(h.s="0"+s),0>=s&&(h.s="00"),10>b&&(h.ms="00"+b),100>b&&(h.ms="0"+b)),c.onchange.call(f,h)};var l=function(){e||(e=setInterval(k,10))};var m=function(){clearInterval(e),e=null};var n=function(){s="20",b="000",c.onchange.call(f,{nms:nms,s:s,ms:b})};c.isStart?l():n(),a(c.startBtn).click(function(){l()}),a(c.stopBtn).click(function(){m()}),a(c.resetBtn).click(function(){n()}),g.start=l,g.stop=m,g.reset=n,d.push(g)}),d.start=function(){for(var a=0;a<d.length;a++)d[a].start()},d.stop=function(){for(var a=0;a<d.length;a++)d[a].stop()},d.reset=function(){for(var a=0;a<d.length;a++)d[a].reset()},d}}(jQuery),seajs.use(["jdf/1.0.0/unit/login/1.0.0/login.js","jdf/1.0.0/ui/dialog/1.0.0/dialog","jdf/1.0.0/unit/trimPath/1.0.0/trimPath.js","jdf/1.0.0/ui/ceilinglamp/1.0.0/ceilinglamp","vip/2014/js/vip.user.js"],function(){!function(a){a.browser.msie&&a.browser.version<=6||a(".g_puzzle_offside").ceilinglamp({zIndex:10,top:0});var i,k,n,o,b=!1,d=(a(".g_puzzle_item"),a(".star")),f=!1,g=!1,h=disY=0,j=0,p=a(".g_puzzle_offside"),q=a(".g_puzzle_bg"),r=a(".g_puzzle_wp");puzzle_content=a(".g_puzzle_content"),puzzle_succ=a(".g_puzzle_over_succ"),puzzle_defeated=a(".g_puzzle_over_defeated");var s=a(document).width();var t=a(document).height();var u;var v;var w=/^0(0|-)/g;var x=a(".time_down span").html()||20;1==a("#content").attr("userlogin")?p.attr("href","#anchor"):p.attr("href","#");function y(){f=!1,g=!1,h=disY=0,a(".shade").show(),d.show(),a(".time_down").show(),i=setInterval(B,1e3),j&&j.stop(),a("#timer").html("20.000'")}function z(){a(".shade").hide(),d.hide(),a(".time_down").hide();var b='<div class="shade_gray"></div><div class="shade_txt">\u4eca\u5929\u4f11\u606f\u4e00\u4e0b\uff0c\u660e\u5929\u518d\u6765\u73a9\u5427~</div>';a(".g_jigsaw").prepend(b)}function A(){v=[[a(".g_puzzle_item").eq(0),a(".g_puzzle_item").eq(1),a(".g_puzzle_item").eq(2)],[a(".g_puzzle_item").eq(3),a(".g_puzzle_item").eq(4),a(".g_puzzle_item").eq(5)],[a(".g_puzzle_item").eq(6),a(".g_puzzle_item").eq(7),a(".g_puzzle_item").eq(8)]],a(".g_jigsaw_img").remove(),a(".g_puzzle_box").show(),puzzle_defeated.hide(""),puzzle_succ.hide(""),u=a(".g_puzzle_box").offset(),a(".shade").hide(),d.hide(),j=a.countup({ele:a("#timer"),isTwoDigits:!0,onchange:function(b){w.test(b.s)?(j.stop(),a(this).html("00.000'"),F()):a(this).html(b.s+"."+b.ms+"'")}}),a(".time_down").hide()}function B(){var b=a(".time_down span").html();b--,0==b&&(A(),clearInterval(i)),a(".time_down span").html(b)}d.click(function(){clearInterval(i),A()}),p.bind("click",function(){jdUser.login(function(){return b?void 0:(b=!0,s=a(document).width(),t=a(document).height(),u=a(".g_puzzle_box").offset(),p.hide(),window.location.href==window.location.protocol+"//vip.jd.com/?pt=1"&&(window.location.href=window.location.protocol+"//vip.jd.com/?pt=1#anchor"),G(),!1)},!0)}),1==a("#content").attr("pt")&&p.trigger("click!"),a(".g_puzzle_close").click(function(){b=!1,a(".shade_gray").remove(),a(".shade_txt").remove(),a(".g_jigsaw_img").remove(),p.show(),a(".g_puzzle_content").show().siblings(".g_puzzle_over_succ,.g_puzzle_over_defeated").hide(),a(".g_puzzle_box").hide(),q.hide(),r.hide(),i&&clearInterval(i),j&&j.stop(),a(".time_down span").html(x)}),a(".g_puzzle_box").delegate(".g_puzzle_item","mousedown",function(b){if(!g){f=!0,h=b.pageX-a(this).offset().left,disY=b.pageY-a(this).offset().top;var c='<div id="drag" style="position:absolute;left:'+(a(this).offset().left+1)+"px;top:"+a(this).offset().top+'px;z-index:9999">'+a(this).html()+"</div>";return a("body").append(c),a(this).addClass("drayStar").attr("data-img",a(this).html()).html(""),!1}}),a("body").mousemove(function(b){if(f){clearTimeout(n);var c=b.pageX-h;var d=b.pageY-disY;var e=s-126;var g=t-126;var i=u.left-66;var j=u.top-66;c=0>c?0:c,c=c>e?e:c,d=0>d?0:d,d=d>g?g:d,a("#drag").css({left:c+"px",top:d+"px"});var k=v;return Math.ceil((d-j)/131)>3||Math.ceil((d-j)/131)<1||Math.ceil((c-i)/131)>3||Math.ceil((c-i)/131)<1?(a(".g_puzzle_item").removeClass("dragover"),!1):(k[Math.ceil((d-j)/131)-1][Math.ceil((c-i)/131)-1].addClass("dragover").siblings().removeClass("dragover"),!1)}}),a(document).mouseup(function(){var b=a(".drayStar").attr("data-img"),c=a(".dragover").html();return a(".drayStar").length<=0?!1:(a(".dragover").length>0?(a(".drayStar").html(c).removeClass("drayStar").removeAttr("data-img"),a(".dragover").html(b).removeClass("dragover")):(a(".drayStar").html(b).removeAttr("data-img"),a(".g_puzzle_item").removeClass("drayStar")),a("#drag").remove(),strResult="",a(".g_puzzle_box .g_puzzle_item").each(function(){strResult+=a(this).find("img").attr("data-value")}),k={pt:1e3*a("#timer").html().split("'")[0],authCode:authCode,gameResult:strResult},n=setTimeout(function(){1*a("#timer").html().split("'")[0]>0&&E()},500),void(f=!1))});function C(b,c){1==b?puzzle_succ.addClass("quan"):puzzle_succ.removeClass("quan"),c&&puzzle_succ.find(".succ_last_score").html("\u6700\u597d\u6210\u7ee9 "+Math.floor(c.result.user_best_times/1e3)+"'"+c.result.user_best_times%1e3+"''"),a(".g_puzzle_share").hide(),o=(20-a("#timer").html().split("'")[0]).toFixed(3),a(".succ_second").html((o+"''").split(".").join("'")),puzzle_content.hide(""),puzzle_succ.show(""),i&&clearInterval(i),j.stop(),a("#timer").html("00.000'")}function D(){a(".g_puzzle_share").hide(),puzzle_content.hide(""),puzzle_defeated.show(""),j.stop(),a("#timer").html("00.000'")}a(".replay_btn").click(function(){i&&clearInterval(i),a("#timer").html("20.000'"),a(".time_down span").html(x),a(".g_puzzle_box").hide(),puzzle_defeated.hide(""),puzzle_succ.hide(""),puzzle_content.show(""),G(),g=!1});function E(){a.ajax({type:"POST",url:"//vip.jd.com/index.php?mod=Vip.Ajax&action=puzzlesSendResult",data:k,dataType:"jsonp",success:function(b){1==b.success&&"200"==b.resultCode?(1==b.result.presType?(puzzle_succ.find(".g_puzzle_succeed").html("\u606d\u559c\u60a8\uff01\u60a8\u83b7\u5f97\u4e86"+b.result.name+"\uff01"),puzzle_succ.find(".succ_quan").html('<img src="//img30.360buyimg.com/vip/'+b.result.imgurl+'" />')):a(".g_puzzle_succeed").html(b.result.beanCount>0?"\u606d\u559c\u60a8\uff01\u60a8\u83b7\u5f97\u4e86<em>"+b.result.beanCount+"</em>\u4e2a\u4eac\u8c46\u5466~":"\u60a8\u6ca1\u6709\u83b7\u5f97\u5956\u54c1\u5462~\u7ee7\u7eed\u52a0\u6cb9\uff01"),C(b.result.presType,b),g=!0):1==b.success&&"201"==b.resultCode&&(a(".g_puzzle_succeed").html("\u60a8\u6ca1\u6709\u83b7\u5f97\u5956\u54c1\u5462~\u7ee7\u7eed\u52a0\u6cb9\uff01"),C(2,b),g=!0)}})}function F(){strResult="",a(".g_puzzle_box .g_puzzle_item").each(function(){strResult+=a(this).find("img").attr("data-value")}),k={pt:1e3*a("#timer").html().split("'")[0],authCode:authCode,gameResult:strResult},a.ajax({type:"POST",url:"//vip.jd.com/index.php?mod=Vip.Ajax&action=puzzlesSendResult",data:k,dataType:"jsonp",success:function(b){1==b.success&&"200"==b.resultCode?(1==b.result.presType?(puzzle_succ.find(".g_puzzle_succeed").html("\u606d\u559c\u60a8\uff01\u60a8\u83b7\u5f97\u4e86"+b.result.name+"\uff01"),puzzle_succ.find(".succ_quan").html('<img src="//img30.360buyimg.com/vip/'+b.result.imgurl+'" />')):a(".g_puzzle_succeed").html(b.result.beanCount>0?"\u606d\u559c\u60a8\uff01\u60a8\u83b7\u5f97\u4e86<em>"+b.result.beanCount+"</em>\u4e2a\u4eac\u8c46\u5466~":"\u60a8\u6ca1\u6709\u83b7\u5f97\u5956\u54c1\u5462~\u7ee7\u7eed\u52a0\u6cb9\uff01"),C(b.result.presType,b),g=!0):1==b.success&&"201"==b.resultCode?(a(".g_puzzle_succeed").html("\u60a8\u6ca1\u6709\u83b7\u5f97\u5956\u54c1\u5462~\u7ee7\u7eed\u52a0\u6cb9\uff01"),C(2,b),g=!0):0==b.success&&(D(),g=!0)}})}function G(){a.ajax({type:"POST",url:"//vip.jd.com/index.php?mod=Vip.MemberIndex&action=getGameInfoByPin",dataType:"jsonp",success:function(b){var c="";if(q.show(),r.show(),0==b.success||"501"==b.resultCode||"307"==b.resultCode)return a(".info").html(""),a(".ad").html(""),z(),!1;if(""==b.result.puzzle.adText?a(".info").attr("style","margin-top:15px").html("\u5171\u6709<span>"+b.result.onlineCount+"</span>\u4eba\u5728\u73a9\u6e38\u620f"):a(".info").removeAttr("style").html("\u5171\u6709<span>"+b.result.onlineCount+"</span>\u4eba\u5728\u73a9\u6e38\u620f"),a(".ad").html(""==b.result.puzzle.adUrl?b.result.puzzle.adText:'<a href="'+b.result.puzzle.adUrl+'" target="_blank">'+b.result.puzzle.adText+"</a>"),1==b.success&&"200"==b.resultCode){1==b.result.beansOver?a(".g_puzzle_title span").addClass("red").html("\u60a8\u6765\u665a\u4e00\u6b65\uff0c\u4eca\u5929\u5956\u54c1\u53d1\u5b8c\u5566~"):a(".g_puzzle_title span").removeClass("red").html("\u5b8c\u6210\u62fc\u56fe\u5c06\u6709\u673a\u4f1a\u83b7\u5f97\u5956\u54c1\u54e6~");var d=a('<img class="g_jigsaw_img" width="388" height="388" src="//img30.360buyimg.com/vip/s378x378_'+b.result.puzzle.imgUrl+'"/>');if(a(".g_jigsaw").attr("data-img",d.attr("src")).append(d),a.each(b.result.puzzleList,function(a,b){c+='<div class="g_puzzle_item"><img width="126" height="126" src=" //img1'+a%5+".360buyimg.com/vip/s126x126_"+b.img+'" data-value="'+b.value+'"></div>'}),a(".g_puzzle_box").attr("data-authCode",b.result.authCode).html(c),authCode=b.result.authCode,""!=a.trim(b.result.puzzle.adUrl)){var e=a(".hd_link_btn");e.length&&e.attr("href",b.result.puzzle.adUrl)}y()}else if(0==b.success&&"703"==b.resultCode){var d=a('<img class="g_jigsaw_img" width="388" height="388" src="//img30.360buyimg.com/vip/s378x378_'+b.result.puzzle.imgUrl+'"/>');a(".g_jigsaw").append(d),z()}}})}var H={shareTpl:'\u5206\u4eab\u5230\uff1a				<a id="site-sina" class="share_sina" href="javascript:;"></a>				<a id="qqweibo" class="share_twb" href="javascript:;"></a>				<a id="site-renren" class="share_rr" href="javascript:;"></a>				<a id="qzone" class="share_zone" href="javascript:;"></a>				<a id="site-douban" class="share_quan" href="javascript:;"></a>				',bindEvent:function(){var b=this;var c=b.shareTpl.process();a(".g_puzzle_share").html(c),a(".share_btn").click(function(){a(this).parent().next(".g_puzzle_share").toggle()}),a(".g_puzzle_over_succ .g_puzzle_share a").bind("click",function(){var c=a(this).attr("id");a(this).parents(".info-box");var e={title:"\u4eac\u4e1c\u4f1a\u5458\u4ff1\u4e50\u90e8\uff0c\u73a9\u62fc\u56fe\uff0c\u5f97\u4eac\u8c46\uff01 \u6211\u7684\u6210\u7ee9\u662f"+o+"\u79d2\uff01\u6765\u6311\u6218\u6211\u5427~",content:"\u4eac\u4e1c\u4f1a\u5458\u4ff1\u4e50\u90e8\uff0c\u73a9\u62fc\u56fe\uff0c\u5f97\u4eac\u8c46\uff01 \u6211\u7684\u6210\u7ee9\u662f"+o+"\u79d2\uff01\u6765\u6311\u6218\u6211\u5427~",img:a(".g_jigsaw").attr("data-img"),productUrl:window.location.protocol+"//vip.jd.com/?pt=1"};b.commond(c,e)}),a(".g_puzzle_over_defeated .g_puzzle_share a").bind("click",function(){var c=a(this).attr("id");a(this).parents(".info-box");var e={title:"\u4eac\u4e1c\u4f1a\u5458\u4ff1\u4e50\u90e8\uff0c\u73a9\u62fc\u56fe\uff0c\u5f97\u4eac\u8c46\uff01 \u6211\u6311\u6218\u5931\u8d25\u4e86\uff01\u5c31\u770b\u4f60\u4e86~",content:"\u4eac\u4e1c\u4f1a\u5458\u4ff1\u4e50\u90e8\uff0c\u73a9\u62fc\u56fe\uff0c\u5f97\u4eac\u8c46\uff01 \u6211\u6311\u6218\u5931\u8d25\u4e86\uff01\u5c31\u770b\u4f60\u4e86~",img:a(".g_jigsaw").attr("data-img"),productUrl:window.location.protocol+"//vip.jd.com/?pt=1"};b.commond(c,e)});var d=[],f=window.location.href;d.push('<div class="model-prompt model-partake"><div class="form"><label>\u5546\u54c1\u94fe\u63a5\uff1a</label><input type="text" class="text" value='+f+"></div>"),a.browser.msie?(d.push('<div class="ac"><input type="button" class="btn-copy" value="\u590d\u5236\u5e76\u53d1\u7ed9\u6211\u7684\u597d\u53cb" onclick="window.clipboardData.setData(\'Text\',\''+f+"');$('.model-partake').html('\u5546\u54c1\u94fe\u63a5\u5730\u5740\u5df2\u7ecf\u590d\u5236\uff0c\u60a8\u53ef\u4ee5\u7c98\u8d34\u5230QQ\u3001MSN\u6216\u90ae\u4ef6\u4e2d\u53d1\u9001\u7ed9\u597d\u53cb\u4e86!')\"></div>"),e=90):(d.push('<div class="i-con">\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u81ea\u52a8\u590d\u5236\u529f\u80fd\u3002\u60a8\u53ef\u4ee5\u6309\u4f4fCtrl+C\uff0c\u5c06\u5546\u54c1\u94fe\u63a5\u5730\u5740\u590d\u5236\u4e0b\u6765\u3002</div>'),e=110),d.push("</div>"),d=d.join(""),a("#site-qq").dialog({title:"\u63d0\u793a",width:400,height:80,type:"text",hasButton:!0,source:d})},commond:function(a,b){switch(a){case"site-sina":this.jdPshowRecommend("http://v.t.sina.com.cn/share/share.php?appkey=2445336821","sina",b);break;case"qqweibo":this.jdPshowRecommend("http://v.t.qq.com/share/share.php?source=1000002&site=http://www.jd.com","qzone",b);break;case"site-renren":this.jdPshowRecommend("http://share.renren.com/share/buttonshare/post/1004?","renren",b);break;case"qzone":this.jdPshowRecommend("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?","kaixing",b);break;case"site-douban":this.jdPshowRecommend("http://www.douban.com/recommend/?","douban",b);break;case"site-msn":this.jdPshowRecommend("http://profile.live.com/badge/?","MSN",b)}},jdPshowRecommend:function(a,b,c){readCookie("pin")||"";"qzone"==b&&(a=a+"&title="+c.content+"&pic="+c.img+"&url="+c.productUrl),"sina"==b&&(a=a+"&title="+encodeURIComponent(c.content)+"&pic="+encodeURIComponent(c.img)+"&url="+encodeURIComponent(c.productUrl),window.open(a,"","height=500, width=600")),"renren"==b&&(a=a+"title="+c.title+"&content="+c.content+"&pic="+c.img+"&url="+c.productUrl),"kaixing"==b&&(a=a+"rtitle="+c.title+"&rcontent="+c.content+"&rurl="+c.productUrl),"douban"==b&&(a=a+"title="+c.title+"&comment="+c.content+"&url="+c.productUrl),"MSN"==b&&(a=a+"url="+c.productUrl+"&title="+c.title+"&description="+c.content+"&screenshot="+c.img),"sina"!=b&&window.open(encodeURI(a),"","height=500, width=600")}};H.bindEvent(),window.isPuzzlesPlaying=function(){return b}}(jQuery)}),seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable"],function(){$(".new-user-slider").switchable({type:"slider",mainClass:"slider-li",contentClass:"slider-ls",prevClass:"prev",nextClass:"next",speed:600,hasPage:!0,visible:5,step:5})}),seajs.use(["jdf/1.0.0/unit/globalInit/1.0.0/globalInit","jdf/1.0.0/unit/login/1.0.0/login.js","jdf/1.0.0/ui/switchable/1.0.0/switchable","jdf/1.0.0/ui/ceilinglamp/1.0.0/ceilinglamp","jdf/1.0.0/ui/lazyload/1.0.0/lazyload","vip/2014/js/vip.checkPrice.js","jdf/1.0.0/ui/elevator/1.0.0/elevator","vip/2014/js/vip.beanEvent.js","vip/2014/js/vip.user.js","vip/2014/js/jquery.groupPin.js"],function(a,b,c,d,e,f){$(function(){var a=function(a,b){var c=setInterval(function(){a()&&(clearInterval(c),b())},500)};$("body").delegate(".addToCart","click",function(){jdUser.login(f.checkPrice.initBtn,!0)}),a(function(){var a=$("#user-info .u-worth").hasClass("loading");return!!+$("#content").attr("userlogin")&&!a},function(){var a=parseInt($("#user-info .u-info").attr("data-ub")||0);$("li .p3","#floor1").each(function(){var b=$(this),c=parseInt(b.attr("data-jb"));c>a&&b.addClass("cannot")})}),$(".floor").switchable({navItem:"ui-switchable-item",type:"tab",navSelectedClass:"current",contentClass:"floor",mainClass:"floor-cont",event:"click",callback:function(b,c,d){var e=$(this.el).attr("id");if("floor2"==e||"floor5"==e){var g="floor2"==e?"price":"purchase";f.checkPrice.coupon($(d),"li, .advSec",g),a(function(){var a=$("#user-info .u-worth").hasClass("loading");return $(d).hasClass("jpriced")&&!a},function(){$("body").trigger("scroll"),!!+$("#content").attr("userlogin")&&(f.checkPrice.couponUI($(d),"li, .advSec",g,{ul:$("#content").attr("userLevel"),beans:$("#user-info .u-info").attr("data-ub")||0}),f.checkPrice.initBtn())})}else $("body").trigger("scroll")}})}),$(function(){window.BeanEvent;var b=function(){return $($("#gb-tab").hasClass("ui-switchable-tab")?"#gb-tab .ui-switchable-panel-selected":"body")};$("#floor1,.bean-exchange-list").delegate(".p3 span.normal:not(.btn-disabled)","click",function(){var a=this,b=$(this);jdUser.login(function(){{var c=b.parents("li");c.parent().prev()}var e=$.trim(c.find(".p3 span").text().match(/\d+/g).join(""));var f=c.find(".p1 em").text();var g=c.find(".p2").text();var h=c.find(".num").text();var i=c.find(".p1 span").text().match(/\d+/g)||[];var j=c.find("h3").text();c.find("a.cat").text();var l=!(c.find(".img>a").attr("isPop")&&"0"==c.find(".img>a").attr("isPop"));var m=b.attr("itid");var n=function(){return i.length>0?"\u6ee1"+i+"\u51cf"+f:$.trim(c.find(".ftx-04").text())}();dialogClose(),$("body").dialog({type:"text",width:510,height:220,source:"<div class='tip-box warn-box'><h3 class='ftx-04'>\u60a8\u6b63\u5728\u4f7f\u7528<span class='ml15 mr5'>"+e+"</span>\u4e2a\u4eac\u8c46 \u5151\u6362<br>1\u5f20"+j+"<span class='ml15'>"+f+"\u5143\u4f18\u60e0\u5238</span><span class='ftx-16'>\uff08"+n+"\uff09</span></h3><div class='box-cont'><p class='ftx-03'>"+g+"<br>\u6bcf\u4e2aID\u9650\u9886"+h+"\u5f20<br>\u672c\u6d3b\u52a8\u4e3a\u6982\u7387\u6027\u4e8b\u4ef6\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u5ba2\u6237\u6210\u529f\u5151\u6362\u4f18\u60e0\u5238</p></div><div class='op-btns'><a exid='"+b.attr("itid")+"' href='javascript:;' class='comfexge btn-9'>\u786e\u5b9a</a><a href='javascript:;' class='btn-9 ml10' onclick='dialogClose()'>\u53d6\u6d88</a></div></div>",title:"\u63d0\u793a"}),$(".comfexge").die("click").live("click",function(){BeanEvent.exchange(l,m,a)})},!0)}),$("#floor1").delegate(".p3 span.sj:not(.btn-disabled)","click",function(){var b=$(this);jdUser.login(function(){{var a=b.parents("li");a.parent().prev()}var d=$.trim(a.find(".p3 span").text().match(/\d+/g).join(""));var e=a.find("h3").text();a.find(".p2").text().match(/\d+/g);var g=a.find(".num.hide").text();var h=a.find(".img a").attr("href");b.attr("itid");var j=b.attr("itemid");var k=$("#TrackID").val();var l={jdNum:d,jdLimitNum:g,productName:e};dialogClose(),$(".m-submit").die("click").live("click",function(){var a=$.trim($("#payPwd").attr("value")),b=$.trim($("#verifyCode").attr("value")),c=$("#verifyCode").size()>0;if(c){if($("#payPwd").keydown(function(){$("#j-payPwd-msg").hide()}),$("#verifyCode").keydown(function(){$("#j-verifyCode-msg").hide()}),0==a.length)return void $("#j-payPwd-msg").show();if(0==b.length)return void $("j-verifyCode-msg").show()}else{if($("#payPwd").keydown(function(){$(".msg-error").hide()}),0==a.length)return void $(".msg-error").show();delete BeanEvent.verifyCodeKey}BeanEvent.payAction(j,k,a,h,l,g,b,!0)});var m=$.trim($("#j-timesLimit").text());if("true"==m){var n={content:"\u60a8\u5df2\u7ecf\u5151\u6362\u8fc7\u5566\uff0c\u6bcf\u4e2aID\u53ea\u80fd\u5151\u6362"+g+"\u6b21\u54e6~"};return dialogClose(),void $("body").dialog({type:"text",width:300,height:100,source:TemplateEngine(tpl.fail,n),title:"\u63d0\u793a"})}BeanEvent.payAction(j,k,"",h,l,g)},!0)}),$(".p-change-op .btn-1:not(.btn-disabled)",b()).bind("click",function(){var a=this,b=$(this);jdUser.login(function(){var c=b.parent().parent().prev(),d=b.parent().prev().parent();var e=$.trim(d.end().find(">span.num").text());var f=c.find(".worth").text().match(/\d+/g).join("");var g=c.find(".ftx-03").text().match(/\d+/g);var h=c.find(".limit>.num").text();var i=c.find(".exc-msg").text().match(/\d+/g)||[];var j=d.find(".exc-txt1").text();var k=d.find(".exc-txt2").text();var l=!(d.find(".exc-img>a").attr("isPop")&&"0"==d.find(".exc-img>a").attr("isPop"));var m=b.attr("itid");var n=function(){return i.length>0?"\u6ee1"+i+"\u51cf"+f:$.trim(c.find(".exc-msg").text())}();dialogClose(),$("body").dialog({type:"text",width:510,height:220,source:"<div class='tip-box warn-box'><h3 class='ftx-04'>\u60a8\u6b63\u5728\u4f7f\u7528<span class='ml15 mr5'>"+e+"</span>\u4e2a\u4eac\u8c46 \u5151\u6362<br>1\u5f20"+j+k+"<span class='ml15'>"+f+"\u5143\u4f18\u60e0\u5238</span><span class='ftx-16'>\uff08"+n+"\uff09</span></h3><div class='box-cont'><p class='ftx-03'>"+g+"<br>\u6bcf\u4e2aID\u9650\u9886"+h+"\u5f20<br>\u672c\u6d3b\u52a8\u4e3a\u6982\u7387\u6027\u4e8b\u4ef6\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u5ba2\u6237\u6210\u529f\u5151\u6362\u4f18\u60e0\u5238</p></div><div class='op-btns'><a exid='"+b.attr("itid")+"' href='javascript:;' class='comfexge btn-9'>\u786e\u5b9a</a><a href='javascript:;' class='btn-9 ml10' onclick='dialogClose()'>\u53d6\u6d88</a></div></div>",title:"\u63d0\u793a"}),$(".comfexge").die("click").live("click",function(){BeanEvent.exchange(l,m,a)})},!0)}),$("#submitExchangeBotton").bind("click",function(){if(!$(this).hasClass("btn-disabled")){var a=this,b=$(this);jdUser.login(function(){var c=b.parent().parent().prev(),d=b.parent().prev().parent();var e=$.trim(d.end().find(">span.num").text());var f=c.find(".worth").text().match(/\d+/g).join("");var g=c.find(".ftx-03").text();var h=c.find(".limit>.num").text();var i=c.find(".exc-msg").text().match(/\d+/g)||[];var j=d.find(".exc-txt1").text();var k=d.find(".exc-txt2").text();var l=!(d.find(".exc-img>a").attr("isPop")&&"0"==d.find(".exc-img>a").attr("isPop"));var m=b.attr("itid");var n=function(){return i.length>0?"\u6ee1"+i+"\u51cf"+f:$.trim(c.find(".exc-msg").text())}();dialogClose(),$("body").dialog({type:"text",width:510,height:220,source:"<div class='tip-box warn-box'><h3 class='ftx-04'>\u60a8\u6b63\u5728\u4f7f\u7528<span class='ml15 mr5'>"+e+"</span>\u4e2a\u4eac\u8c46 \u5151\u6362<br>1\u5f20"+j+k+"<span class='ml15'>"+f+"\u5143\u4f18\u60e0\u5238</span><span class='ftx-16'>\uff08"+n+"\uff09</span></h3><div class='box-cont'><p class='ftx-03'>"+g+"<br>\u6bcf\u4e2aID\u9650\u9886"+h+"\u5f20<br>\u672c\u6d3b\u52a8\u4e3a\u6982\u7387\u6027\u4e8b\u4ef6\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u5ba2\u6237\u6210\u529f\u5151\u6362\u4f18\u60e0\u5238</p></div><div class='op-btns'><a exid='"+b.attr("itid")+"' href='javascript:;' class='comfexge btn-9'>\u786e\u5b9a</a><a href='javascript:;' class='btn-9 ml10' onclick='dialogClose()'>\u53d6\u6d88</a></div></div>",title:"\u63d0\u793a"}),$(".comfexge").die("click").live("click",function(){BeanEvent.exchange(l,m,a)})},!0)}}),$("#g-scroll .j_btn_exchange").bind("click",function(){var a=this,b=$(this);var c=$(".j_msg_txt",b.parent()).html();jdUser.login(function(){var d=b.attr("fhref");var e=b.attr("itid");dialogClose(),$("body").dialog({type:"text",width:510,height:200,source:"<div class='tip-box warn-box'>"+c+"<div class='op-btns'><a exid='"+b.attr("itid")+"' href='javascript:;' class='comfexge btn-9'>\u786e\u5b9a</a><a href='javascript:;' class='btn-9 ml10' onclick='dialogClose()'>\u53d6\u6d88</a></div></div>",title:"\u63d0\u793a"}),$(".comfexge").die("click").live("click",function(){BeanEvent.exchange(d,e,a)})},!0)})}),$(function(){$("#container-2015").groupPin(),$("body").lazyload({type:"img",source:"data-lazyload"})})}),seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable"],function(){$(function(){$(".vip-rights").switchable({navItem:"tab-li",type:"focus",navSelectedClass:"active",contentClass:"vip-rights-c",mainClass:"ui-switchable-panel",autoPlay:!0})})}),seajs.use([],function(){$(function(){var a=null;function b(){return null==a&&(a=$("#giftpop").data("giftofuser")),a}function c(){$(".giftpop").remove(),$(".ui-giftpop-mask").remove(),$(".giftpop-done").remove()}$(window).bind("load resize",function(){var a=$(document.body).width(),b=$(document.body).height();$(".ui-giftpop-mask").css({width:a,height:b})}),$(document.body).delegate(".gift-wrap","mouseenter",function(){var a=$(this);if(a.addClass("hover"),!a.hasClass("loading")&&(a.addClass("loading"),!a.hasClass("loaded"))){var c=b(),d=[];$.each(c,function(){var b=this;$.ajax({type:"GET",async:!1,url:"//vip.jd.com/index.php?mod=Vip.MemberGift&action=getVipClubGiftPresentList",data:{rid:b.id},dataType:"jsonp",success:function(c){c.success&&(a.addClass("loaded"),null!=c.result.list&&d.push({pname:b.name,list:c.result.list}))}})});var e="";$.each(d,function(){e+='<dl class="gift-ls-dl"><dt class="gift-ls-tt">'+this.pname+"\uff1a</dt>";var a=this;$.each(a.list,function(){e+='<dd class="gift-ls-itm">'+this.name+"</dd>"}),e+="</dl>"}),$("#giftpop").find(".gift-list div:eq(0)").html(e)}}).delegate(".gift-wrap","mouseleave",function(){$(this).removeClass("hover")}).delegate(".giftpop-close","click",function(){c()}).delegate("#giftget","click",function(){var a=b();$.each(a,function(){$.ajax({type:"GET",url:"//vip.jd.com/index.php?mod=Vip.MemberGift&action=getGiftWard",data:{rid:this.id},dataType:"jsonp",success:function(){}})}),$("#my-gift .u-have-gifts span").addClass("disabled"),c();var d=$($("body").data("popresult"));$("body").append(d.show()),setTimeout(function(){d.remove()},4e3)})})});
/* vip-2014 vip.userinfo.js Date:2016-01-05 18:52:29 */
seajs.config({alias:{login:"jdf/1.0.0/unit/login/1.0.0/login.js",switchable:"jdf/1.0.0/ui/switchable/1.0.0/switchable"}}),seajs.use(["login","switchable","vip/2014/js/vip.user.js"],function(){function c(){$(".u-have-rights").switchable({type:"slider",mainClass:"ui-switchable-panel",contentClass:"ui-switchable-panel-main",prevClass:"prev",nextClass:"next",speed:600,hasPage:!0}),$(".u-have-gifts span a").click(function(){var a=$("img",this).attr("opensrc"),b=$(this).attr("rid"),c=$("#"+$(this).attr("fid")),d=$(this).attr("gtype");return $("img",this).attr("src",a),$.ajax({type:"GET",url:"//vip.jd.com/index.php?mod=Vip.MemberGift&action=getVipClubGiftPresentList",data:{rid:b},dataType:"jsonp",success:function(a){if(a.success){var e="";var f=a.result.list.length;$.each(a.result.list,function(a){e+=a>2?'<li class="li-item"><div class="p-img"><a target="_blank" href="'+(1==this.type?this.link:"#none")+'"><img width="160" height="160" alt="'+this.name+'"  class="err-product" src="//misc.360buyimg.com/lib/img/e/blank.gif" data-src="//img30.360buyimg.com/n2/'+this.imgUrl+'" data-img="1" title="'+this.name+'"></a></div><div class="p-name"><a target="_blank" href="'+(1==this.type?this.link:"#none")+'">'+this.name+"</a></div></li>":'<li class="li-item"><div class="p-img"><a target="_blank" href="'+(1==this.type?this.link:"#none")+'"><img width="160" height="160" alt="'+this.name+'"  src="//img30.360buyimg.com/n2/'+this.imgUrl+'" data-img="1" title="'+this.name+'"></a></div><div class="p-name"><a target="_blank" href="'+(1==this.type?this.link:"#none")+'">'+this.name+"</a></div></li>"}),$.closeDialog(),$("body").dialog({type:"text",width:636,height:304,source:'<div class="item"><div class="tit">'+c.html()+'</div><div id="gifts-slider" class="list-h gift-thickbox">'+(f>3?'<div class="op-btns vip-prev" id="prev"></div>':"")+(f>3?'<div class="op-btns vip-next" id="next"></div>':"")+'<div class="list-wrap" id="gift-list"><ul id="gift-d-con" class="gift-d-con clearfix">'+e+"</ul></div></div>"+(0==$("#my-gift").attr("mobileflag")&&2==d?'<div class="op-btns ac"><a target="_blank" class="alink" href="//safe.jd.com/validate/verifyMobile">\u9a8c\u8bc1\u624b\u673a</a>\u540e\u5373\u53ef\u9886\u53d6\uff01</div>':'<div class="op-btns ac"><a rid="'+b+'" id="freeGetBtn" href="#none" class="btn-3">\u514d\u8d39\u9886\u53d6</a></div>')+"</div>",title:"\u9886\u53d6\u793c\u5305",_close_val:"\xd7",_titleOn:!0,onReady:function(){$("#gifts-slider").switchable({type:"slider",hasPage:!0,mainClass:"li-item",contentClass:"gift-d-con",bodyClass:"list-wrap",prevClass:"vip-prev",nextClass:"vip-next",speed:600,autoLock:!0,navSelectedClass:"curr",step:3,visible:3,callback:function(a){for(var b=0,c=this.main.length;3>b&&c>a+b;b++)$("img",this.main[a+b]).each(function(){var a=$(this).attr("data-src");$(this).addClass("err-product").attr("src",a?a:$(this).attr("data-lazyload"))})}}),$("#freeGetBtn").bind("click",function(){$.ajax({type:"GET",url:"//vip.jd.com/index.php?mod=Vip.MemberGift&action=getGiftWard",data:{rid:$(this).attr("rid")},dataType:"jsonp",success:function(a){if($.closeDialog(),a.success){var c={1:"<li>\u53bb<a href='//quan.jd.com/user_quan.action'>\u6211\u7684\u4eac\u4e1c>\u4f18\u60e0\u5238</a>\u67e5\u770b\u6536\u5230\u7684\u4f18\u60e0\u5238</li>",2:"<li>\u53bb<a href='//bean.jd.com/myJingBean/list'>\u6211\u7684\u4eac\u4e1c>\u6211\u7684\u4eac\u8c46</a>\u67e5\u770b\u6536\u5230\u7684\u4eac\u8c46</li>",3:"<li>\u53bb<a href='//quan.jd.com/user_quan.action'>\u6211\u7684\u4eac\u4e1c>\u4f18\u60e0\u5238</a>\u67e5\u770b\u6536\u5230\u7684\u4f18\u60e0\u5238</li><li>\u53bb<a href='//bean.jd.com/myJingBean/list'>\u6211\u7684\u4eac\u4e1c>\u6211\u7684\u4eac\u8c46</a>\u67e5\u770b\u6536\u5230\u7684\u4eac\u8c46</li>"};$("body").dialog({type:"text",width:480,height:160,source:"<div class='tip-box succ-box'><h3 class='font-green'>\u9886\u53d6\u6210\u529f</h3><div class='box-cont'><ul>"+c[a.result.selectType]+"</ul></div></div>",title:"\u9886\u53d6\u793c\u5305",_close_val:"\xd7",_titleOn:!0}),$("a[rid="+b+"]").unbind("click").parent().addClass("disabled")}else $("body").dialog(1==a.result.status||2==a.result.status?{type:"text",width:420,height:120,source:"<div class='tip-box warn-box'><h3 class='font-yellow'>\u9886\u53d6\u5931\u8d25</h3><div class='box-cont'><p>\u60a8\u5df2\u7ecf\u9886\u53d6\u8fc7\u793c\u5305\u4e86~ \u4e0d\u8981\u8d2a\u5fc3\u54e6~</p></div></div>",title:"\u9886\u53d6\u793c\u5305",_close_val:"\xd7",_titleOn:!0}:{type:"text",width:420,height:120,source:"<div class='tip-box warn-box'><h3 class='font-yellow'>\u9886\u53d6\u5931\u8d25</h3><div class='box-cont'><p>\u554a\u5440~\u60a8\u6765\u665a\u4e86\u4e00\u6b65\uff0c\u8be5\u793c\u5305\u5df2\u7ecf\u9886\u5b8c\u4e86~\u4e0b\u6b21\u4e00\u5b9a\u8981\u65e9\u70b9\u6765\u54e6~</p></div></div>",title:"\u9886\u53d6\u793c\u5305",_close_val:"\xd7",_titleOn:!0})}})})}})}}}),!1})}$(function(){var b=$("#giftpoptpl").html();$("body").data("popresult",$("#giftsucctpl").html()),0==$("#content").attr("userlogin")?($("#noLogin,#noLogin1").bind("click",function(){jdUser.login("",!0)}).removeAttr("href"),c()):$.ajax({url:"//vip.jd.com/index.php?mod=Vip.MemberIndex&action=getUserInfo",type:"get",dataType:"json",success:function(a){var d=a.result;try{var e=$("#usertpl").html();$("#user-info").html($.tpl(e,d)),d.userInfo.giftOfUser.length&&1==$("#content").attr("popswitch")&&($("body").append($.tpl(b,d)),$("#giftpop").data("giftofuser",d.userInfo.giftOfUser)),$.ajax({url:"//joycenter.jd.com/msgCenter/getUnreadNum.action",type:"get",dataType:"jsonp",success:function(a){"G001001"==a.result&&a.msgUnreadCount>0&&$(".u-info .u-info-img a").html(a.msgUnreadCount+"<i></i>").show()}}),$("#gift-x").bind("click",function(){$(".gift-tip").remove(),$.ajax({url:"//vip.jd.com/index.php?mod=Vip.MemberIndex&action=closeWindowBrithdayWindow&closedate=1 ",type:"get",dataType:"jsonp",success:function(){}})}),$("#overdue-bean .tip-close").bind("click",function(){$("#overdue-bean").remove(),$.ajax({url:"//vip.jd.com/index.php?mod=Vip.MemberIndex&action=closeWindowWithType&closeType=3",type:"get",dataType:"jsonp",success:function(){}})})}catch(f){alert(f)}c()},error:function(){}})})});
/* vip-2014 vip.gotoTop.js Date:2016-01-05 18:52:29 */
seajs.use(["vip/2014/js/vip.fixright.js"],function(){$(function(){var a=$('<div class="go-top-nav"><ul><li><a clstag="vip|keycount|homepage|fankui" href="//surveys.jd.com/index.php?r=survey/index/sid/422183/lang/zh-Hans" target="_blank" title="\u6211\u8981\u53cd\u9988" class="a1"></a></li><li class="line"></li><li><a clstag="vip|keycount|homepage|fanhuidingbu" href="javascript:window.scroll(0,0);" title="\u56de\u5230\u9876\u90e8" class="a2"></a></li></ul></div>').appendTo($("body"));(new FixRight).init(a,1215,500)})});
/* vip-2014 vip.index2015-2.js Date:2016-01-05 18:52:29 */
seajs.use(["jdf/1.0.0/unit/globalInit/1.0.0/globalInit","jdf/1.0.0/unit/login/1.0.0/login.js","jdf/1.0.0/ui/switchable/1.0.0/switchable","jdf/1.0.0/ui/ceilinglamp/1.0.0/ceilinglamp","jdf/1.0.0/ui/lazyload/1.0.0/lazyload","jdf/1.0.0/ui/elevator/1.0.0/elevator","vip/2014/js/vip.fixright.js","vip/2014/js/vip.beanEvent.js","jdf/1.0.0/ui/dialog/1.0.0/dialog"],function(){$(function(){$("body").lazyload({type:"img",source:"data-lazyload"});var b=$(".floor-nav");var c=b.find("a");var d=[];(new FixRight).init(b,1215,$(".floor:eq(0)").offset().top),$(window).bind("load resize",function(){d=[],$(".floor").each(function(){d.push($(this).offset().top)})}).bind("scroll",function(){var a=$(window).scrollTop()+200,b=0;for(var e=0;e<d.length;e++)a>=d[e]&&(b=e);c.removeClass("active").eq(b).addClass("active")}),$("body").lazyload({type:"fn",source:$("#floor3"),space:1e3,onchange:function(a){var b=$("ul.dld",a),c=b.attr("data-source");$.ajax({url:c,dataType:"jsonp",jsonp:"jsoncallback",type:"GET",success:function(a){if(a.length>=4){var c=$("#dldtpl").html();b.append($.tpl(c,{dld:a}))}else $("#floor3").addClass("backup")},complete:function(){$(window).trigger("resize")},error:function(){$("#floor3").addClass("backup")}})}})})});
